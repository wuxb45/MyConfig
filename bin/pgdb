#!/bin/bash
if [[ ! -x $(which sudo 2>/dev/null) ]]; then
  echo "sudo not found"
  exit 0
fi
if [[ ! -x $(which gdb 2>/dev/null) ]]; then
  echo "gdb not found"
  exit 0
fi
if [[ $# -lt 1 ]]; then
  echo "Usage $0 <pid>"
  exit 0
fi
cmddir="$(readlink -e /proc/${1}/cwd)"
[[ -n cmddir ]] && cddir=-cd="${cmddir}"

sudo -Hi gdb ${cddir} -p "${@}"
